(function(g,k,f){var n=function(){for(var a=/audio(.min)?.js.*/,b=document.getElementsByTagName("script"),c=0,d=b.length;c<d;c++){var e=b[c].getAttribute("src");if(a.test(e))return a=e.split("/"),a.pop(),a.join("/")+"/"}return""}();f[g]={instanceCount:0,instances:{},settings:{autoplay:!1,loop:!1,preload:!0,imageLocation:n+"player-graphics.gif",retinaImageLocation:n+"player-graphics@2x.gif",createPlayer:{markup:'          <div class="play-pause">             <p class="play"></p>             <p class="pause"></p>             <p class="loading"></p>             <p class="error"></p>           </div>           <div class="scrubber">             <div class="progress"></div>             <div class="loaded"></div>           </div>           <div class="time">             <em class="played">00:00</em>/<strong class="duration">00:00</strong>           </div>           <div class="error-message"></div>',
playPauseClass:"play-pause",scrubberClass:"scrubber",progressClass:"progress",loaderClass:"loaded",timeClass:"time",durationClass:"duration",playedClass:"played",errorMessageClass:"error-message",playingClass:"playing",loadingClass:"loading",errorClass:"error"},css:'        .audiojs audio { position: absolute; left: -1px; }         .audiojs { width: 460px; height: 36px; background: #404040; overflow: hidden; font-family: monospace; font-size: 12px;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #444), color-stop(0.5, #555), color-stop(0.51, #444), color-stop(1, #444));           background-image: -moz-linear-gradient(center top, #444 0%, #555 50%, #444 51%, #444 100%);           -webkit-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); -moz-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3);           -o-box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.3); }         .audiojs .play-pause { width: 25px; height: 40px; padding: 4px 6px; margin: 0px; float: left; overflow: hidden; border-right: 1px solid #000; }         .audiojs p { display: none; width: 25px; height: 40px; margin: 0px; cursor: pointer; }         .audiojs .play { display: block; }         .audiojs .scrubber { position: relative; float: left; width: 280px; background: #5a5a5a; height: 14px; margin: 10px; border-top: 1px solid #3f3f3f; border-left: 0px; border-bottom: 0px; overflow: hidden; }         .audiojs .progress { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #ccc; z-index: 1;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #ccc), color-stop(0.5, #ddd), color-stop(0.51, #ccc), color-stop(1, #ccc));           background-image: -moz-linear-gradient(center top, #ccc 0%, #ddd 50%, #ccc 51%, #ccc 100%); }         .audiojs .loaded { position: absolute; top: 0px; left: 0px; height: 14px; width: 0px; background: #000;           background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #222), color-stop(0.5, #333), color-stop(0.51, #222), color-stop(1, #222));           background-image: -moz-linear-gradient(center top, #222 0%, #333 50%, #222 51%, #222 100%); }         .audiojs .time { float: left; height: 36px; line-height: 36px; margin: 0px 0px 0px 6px; padding: 0px 6px 0px 12px; border-left: 1px solid #000; color: #ddd; text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5); }         .audiojs .time em { padding: 0px 2px 0px 0px; color: #f9f9f9; font-style: normal; }         .audiojs .time strong { padding: 0px 0px 0px 2px; font-weight: normal; }         .audiojs .error-message { float: left; display: none; margin: 0px 10px; height: 36px; width: 400px; overflow: hidden; line-height: 36px; white-space: nowrap; color: #fff;           text-overflow: ellipsis; -o-text-overflow: ellipsis; -icab-text-overflow: ellipsis; -khtml-text-overflow: ellipsis; -moz-text-overflow: ellipsis; -webkit-text-overflow: ellipsis; }         .audiojs .error-message a { color: #eee; text-decoration: none; padding-bottom: 1px; border-bottom: 1px solid #999; white-space: wrap; }                 .audiojs .play { background: url("$1") -2px -1px no-repeat; }         .audiojs .loading { background: url("$1") -2px -31px no-repeat; }         .audiojs .error { background: url("$1") -2px -61px no-repeat; }         .audiojs .pause { background: url("$1") -2px -91px no-repeat; }                 @media only screen and (-webkit-min-device-pixel-ratio: 2),           only screen and (min--moz-device-pixel-ratio: 2),           only screen and (min-moz-device-pixel-ratio: 2),           only screen and (-o-min-device-pixel-ratio: 2/1),           only screen and (min-device-pixel-ratio: 2) {             .audiojs .play, .audiojs .loading, .audiojs .error, .audiojs .pause {               background-image: url("$2");               -webkit-background-size: 30px 120px;               -moz-background-size: 30px 120px;               -o-background-size: 30px 120px;               background-size: 30px 120px;             }         }                 .playing .play, .playing .loading, .playing .error { display: none; }         .playing .pause { display: block; }                 .loading .play, .loading .pause, .loading .error { display: none; }         .loading .loading { display: block; }                 .error .time, .error .play, .error .pause, .error .scrubber, .error .loading { display: none; }         .error .error { display: block; }         .error .play-pause p { cursor: auto; }         .error .error-message { display: block; }',
trackEnded:function(a){},loadError:function(a){a=this.settings.createPlayer;var b=h(a.errorMessageClass,this.wrapper);f[g].helpers.removeClass(this.wrapper,a.loadingClass);f[g].helpers.addClass(this.wrapper,a.errorClass);b.innerHTML='Error loading: "'+this.mp3+'"'},init:function(){f[g].helpers.addClass(this.wrapper,this.settings.createPlayer.loadingClass)},loadStarted:function(){var a=this.settings.createPlayer,b=h(a.durationClass,this.wrapper),c=Math.floor(this.duration/60),d=Math.floor(this.duration%
60);f[g].helpers.removeClass(this.wrapper,a.loadingClass);b.innerHTML=(10>c?"0":"")+c+":"+(10>d?"0":"")+d},loadProgress:function(a){h(this.settings.createPlayer.loaderClass,this.wrapper).style.width=Math.round(100*a)+"%"},playPause:function(){this.playing?this.settings.play():this.settings.pause()},play:function(){var a=this.settings.createPlayer;f[g].helpers.removeClass(this.wrapper,a.errorClass);f[g].helpers.addClass(this.wrapper,a.playingClass)},pause:function(){f[g].helpers.removeClass(this.wrapper,
this.settings.createPlayer.playingClass)},updatePlayhead:function(a){var b=this.settings.createPlayer;h(b.progressClass,this.wrapper).style.width=Math.round(100*a)+"%";b=h(b.playedClass,this.wrapper);var c=this.duration*a;a=Math.floor(c/60);c=Math.floor(c%60);b.innerHTML=(10>a?"0":"")+a+":"+(10>c?"0":"")+c}},create:function(a,b){b=b||{};return a.length?this.createAll(b,a):this.newInstance(a,b)},createAll:function(a,b){b=b||document.getElementsByTagName("audio");var c=[];a=a||{};for(var d=0,e=b.length;d<
e;d++)-1<(" "+b[d].parentNode.className+" ").replace(/[\n\t]/g," ").indexOf(" audiojs ")||c.push(this.newInstance(b[d],a));return c},newInstance:function(a,b){var c=this.helpers.clone(this.settings),d="audiojs"+this.instanceCount,e="audiojs_wrapper"+this.instanceCount;this.instanceCount++;null!=a.getAttribute("autoplay")&&(c.autoplay=!0);null!=a.getAttribute("loop")&&(c.loop=!0);"none"==a.getAttribute("preload")&&(c.preload=!1);b&&this.helpers.merge(c,b);c.createPlayer.markup?a=this.createPlayer(a,
c.createPlayer,e):a.parentNode.setAttribute("id",e);a=new f[k](a,c);c.css&&this.helpers.injectCss(a,c.css);this.attachEvents(a.wrapper,a);return this.instances[d]=a},createPlayer:function(a,b,c){var d=document.createElement("div"),e=a.cloneNode(!0);d.setAttribute("class","audiojs");d.setAttribute("className","audiojs");d.setAttribute("id",c);e.outerHTML&&!document.createElement("audio").canPlayType?(e=this.helpers.cloneHtml5Node(a),d.innerHTML=b.markup,d.appendChild(e),a.outerHTML=d.outerHTML,d=document.getElementById(c)):
(d.appendChild(e),d.innerHTML+=b.markup,a.parentNode.replaceChild(d,a));return d.getElementsByTagName("audio")[0]},attachEvents:function(a,b){if(b.settings.createPlayer){var c=b.settings.createPlayer,d=h(c.playPauseClass,a),e=h(c.scrubberClass,a);f[g].events.addListener(d,"click",function(a){b.playPause.apply(b)});f[g].events.addListener(e,"click",function(a){a=a.clientX-this.getBoundingClientRect().left;b.skipTo(a/e.offsetWidth)});f[g].events.trackLoadProgress(b);f[g].events.addListener(b.element,
"timeupdate",function(a){b.updatePlayhead.apply(b)});f[g].events.addListener(b.element,"ended",function(a){b.trackEnded.apply(b)});f[g].events.addListener(b.source,"error",function(a){clearInterval(b.readyTimer);clearInterval(b.loadTimer);b.settings.loadError.apply(b)})}},helpers:{merge:function(a,b){for(attr in b)if(a.hasOwnProperty(attr)||b.hasOwnProperty(attr))a[attr]=b[attr]},clone:function(a){if(null==a||"object"!==typeof a)return a;var b=new a.constructor,c;for(c in a)b[c]=arguments.callee(a[c]);
return b},addClass:function(a,b){(new RegExp("(\\s|^)"+b+"(\\s|$)")).test(a.className)||(a.className+=" "+b)},removeClass:function(a,b){a.className=a.className.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," ")},injectCss:function(a,b){var c="",d=document.getElementsByTagName("style");b=b.replace(/\$1/g,a.settings.imageLocation);b=b.replace(/\$2/g,a.settings.retinaImageLocation);a=0;for(var e=d.length;a<e;a++){var f=d[a].getAttribute("title");if(f&&~f.indexOf("audiojs")){e=d[a];if(e.innerHTML===b)return;
c=e.innerHTML;break}}d=document.getElementsByTagName("head")[0];a=d.firstChild;e=document.createElement("style");d&&(e.setAttribute("type","text/css"),e.setAttribute("title","audiojs"),e.styleSheet?e.styleSheet.cssText=c+b:e.appendChild(document.createTextNode(c+b)),a?d.insertBefore(e,a):d.appendChild(e))},cloneHtml5Node:function(a){var b=document.createDocumentFragment(),c=b.createElement?b:document;c.createElement("audio");c=c.createElement("div");b.appendChild(c);c.innerHTML=a.outerHTML;return c.firstChild}},
events:{memoryLeaking:!1,listeners:[],addListener:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&(this.listeners.push(a),this.memoryLeaking||(window.attachEvent("onunload",function(){if(this.listeners)for(var a=0,b=this.listeners.length;a<b;a++)f[g].events.purge(this.listeners[a])}),this.memoryLeaking=!0),a.attachEvent("on"+b,function(){c.call(a,window.event)}))},trackLoadProgress:function(a){if(a.settings.preload){var b,c=/(ipod|iphone|ipad)/i.test(navigator.userAgent);
var d=setInterval(function(){-1<a.element.readyState&&(c||a.init.apply(a));1<a.element.readyState&&(a.settings.autoplay&&a.play.apply(a),clearInterval(d),b=setInterval(function(){a.loadProgress.apply(a);1<=a.loadedPercent&&clearInterval(b)},200))},200);a.readyTimer=d;a.loadTimer=b}},purge:function(a){var b=a.attributes,c;if(b)for(c=0;c<b.length;c+=1)"function"===typeof a[b[c].name]&&(a[b[c].name]=null);if(b=a.childNodes)for(c=0;c<b.length;c+=1)purge(a.childNodes[c])},ready:function(){return function(a){var b=
window,c=!1,d=!0,e=b.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",m=e.addEventListener?"":"on",l=function(d){if("readystatechange"!=d.type||"complete"==e.readyState)("load"==d.type?b:e)[h](m+d.type,l,!1),!c&&(c=!0)&&a.call(b,d.type||d)},k=function(){try{f.doScroll("left")}catch(p){setTimeout(k,50);return}l("poll")};if("complete"==e.readyState)a.call(b,"lazy");else{if(e.createEventObject&&f.doScroll){try{d=
!b.frameElement}catch(p){}d&&k()}e[g](m+"DOMContentLoaded",l,!1);e[g](m+"readystatechange",l,!1);b[g](m+"load",l,!1)}}}()}};f[k]=function(a,b){this.element=a;this.wrapper=a.parentNode;this.source=a.getElementsByTagName("source")[0]||a;var c=a.getElementsByTagName("source")[0];this.mp3=a.getAttribute("src")||(c?c.getAttribute("src"):null);this.settings=b;this.loadStartedCalled=!1;this.loadedPercent=0;this.duration=1;this.playing=!1};f[k].prototype={updatePlayhead:function(){this.settings.updatePlayhead.apply(this,
[this.element.currentTime/this.duration])},skipTo:function(a){a>this.loadedPercent||(this.element.currentTime=this.duration*a,this.updatePlayhead())},load:function(a){this.loadStartedCalled=!1;this.source.setAttribute("src",a);this.element.load();this.mp3=a;f[g].events.trackLoadProgress(this)},loadError:function(){this.settings.loadError.apply(this)},init:function(){this.settings.init.apply(this)},loadStarted:function(){if(!this.element.duration)return!1;this.duration=this.element.duration;this.updatePlayhead();
this.settings.loadStarted.apply(this)},loadProgress:function(){null!=this.element.buffered&&this.element.buffered.length&&(this.loadStartedCalled||(this.loadStartedCalled=this.loadStarted()),this.loadedPercent=this.element.buffered.end(this.element.buffered.length-1)/this.duration,this.settings.loadProgress.apply(this,[this.loadedPercent]))},playPause:function(){this.playing?this.pause():this.play()},play:function(){/(ipod|iphone|ipad)/i.test(navigator.userAgent)&&0==this.element.readyState&&this.init.apply(this);
this.settings.preload||(this.settings.preload=!0,this.element.setAttribute("preload","auto"),f[g].events.trackLoadProgress(this));this.playing=!0;this.element.play();this.settings.play.apply(this)},pause:function(){this.playing=!1;this.element.pause();this.settings.pause.apply(this)},setVolume:function(a){this.element.volume=a},trackEnded:function(a){this.skipTo.apply(this,[0]);this.settings.loop||this.pause.apply(this);this.settings.trackEnded.apply(this)}};var h=function(a,b){var c=[];b=b||document;
if(b.getElementsByClassName)c=b.getElementsByClassName(a);else{var d;b=b.getElementsByTagName("*");var e=new RegExp("(^|\\s)"+a+"(\\s|$)");a=0;for(d=b.length;a<d;a++)e.test(b[a].className)&&c.push(b[a])}return 1<c.length?c:c[0]}})("audiojs","audiojsInstance",this);
